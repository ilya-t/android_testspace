This contains TestSpace core logic that is not bounded to app.